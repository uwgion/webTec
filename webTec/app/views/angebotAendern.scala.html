@(Route:  Route)(angebotForm: Form[Route])(fixedPoints: HashMap[String, String])

@import helper._
@import helper.twitterBootstrap._

@main("HÃ¶riMit") {
<div class="starter-template">
    <h1>Mitfahrgelegenheit ändern</h1>
</div>

     @helper.form(action = routes.Angebote.changeOffer(Route._id), 'Id -> "changeForm", 'class -> "form-group col-md-4") {
       
        <fieldset>
            <legend>Mitfahrgelegenheit Details</legend>
            @inputText(
                angebotForm("startAdresseForm"), 
                'placeholder -> "Bitte eine Zieladresse eingeben.",
                'class -> "form-control",
                '_label -> "Startadresse", 
                '_error -> angebotForm.error("startAdresse")
            )
            
		    @select(
				angebotForm("startAdresseFormSelect"),
				options = options(fixedPoints),
				'class -> "form-control",				
				'_label -> "Von",
               	'_default -> "Bitte auswählen."
			)    
			    
            @for(key <- 0 to Route.wegpunkte.size()-1){
            	<div class="clearfix form-group" id="wegpunkt@{key}_field">
				    <label for="wegpunkt@{key}">Wegpunkt @{key+1}</label>
				    <div class="input">		        
				    <input id="wegpunkt@{key}" class="form-control" name="wegpunkt@{key}" value="@{Route.wegpunkteForm.get(key)}" type="text">			
				        <span class="help-inline"></span>
				        <span class="help-block">Required</span> 
				    </div>
				</div>
            }
			<div id="wegpunkte"></div>
            

		            
            @inputText(
                angebotForm("zielAdresseForm"), 
                'placeholder -> "Bitte eine Startadresse eingeben.",
                'class -> "form-control",
                '_label -> "Zieladresse", 
                '_error -> angebotForm.error("zielAdresse")
            )
           	@select(
				angebotForm("zielAdresseFormSelect"),
				options = options(fixedPoints),
				'class -> "form-control",				
				'_label -> "Nach",
               	'_default -> "Bitte auswählen."
			)        
            @inputText(
                angebotForm("timeForm"), 
                'placeholder -> "Bitte eine Uhrzeit eingeben im Format hh:mm",
                'class -> "form-control",
                '_label -> "Zeit", 
                '_error -> angebotForm.error("zeit")
            )
            @inputDate(
                angebotForm("dateForm"), 
                'placeholder -> "Bitte ein Datum eingeben im Format tt.mm.yyyy",
                'class -> "form-control",
                '_label -> "Datum", 
                '_error -> angebotForm.error("datum")
            )
            @inputText(
                angebotForm("seats"), 
				'placeholder -> "Verfügbare Sitzplätze",
                'class -> "form-control",
                'type -> "number",
                'max -> "9",
                'min -> "1",
                '_label -> "Sitzplätze", 
                '_error -> angebotForm.error("seats")
            )
        </fieldset>
        <div class="actions">
			<input type="submit" class="btn btn-default" id="abschicken" value="Mitfahrgelegenheit ï¿½ndern.">
			<input type="hidden" value=@{Route._id} class="omm_value-offer">
			<input type="button" id="wegPunkteHinzufuegen" class="btn btn-default" value="Wegpunkte hinfzufï¿½gen.">
		</div>

    }
    <script type="text/javascript">
    
     //set counter for additional waypoints, delimiter will be "//"
    var counter = 0;
    $("#wegPunkteHinzufuegen").click(function(){
    	counter += 1;
    	var html = $("#wegpunkte").html();
    	html += '<div class="clearfix form-group"><label for="wegpunkte'+counter+'">Über</label>';
    	html += '<div class="input"><input class="form-control" name="wegpunkte'+counter+'" id="wegpunkte'+counter+'" type="text" placeholder="Über Adresse"></div>';
    	html += '<span class="help-block">Required</span></div>';
	   	$("#wegpunkte").html(html);

    });
/*	$("#abschicken").click(function(event){
		event.preventDefault();
		var id = $(this).parent().find(".omm_value-offer").val();
		console.log(id);
		jsRoutes.controllers.Angebote.angebotAendern(id).ajax({
			data:$("#changeForm").serialize(),
	        type:"PUT"
        });
	}); */
    </script>
 }